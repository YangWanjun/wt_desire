<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>愿望墙</title>
    <link href="https://tympanus.net/Development/Slicebox/css/demo.css" rel="stylesheet">
    <link href="/desire/static/css/slider.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
    <script src="https://tympanus.net/Development/Slicebox/js/jquery.slicebox.js" type="text/javascript"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        window.onload = function () {
            $(function () {
                var Page = (function () {
                    var $navArrows = $('#nav-arrows').hide(),
                        $shadow = $('#shadow').hide(),
                        slicebox = $('#sb-slider').slicebox({
                            onReady: function () {
                                $navArrows.show();
                                $shadow.show();
                            },
                            orientation: 'r',
                            cuboidsRandom: true,
                            disperseFactor: 30
                        }),
                        init = function () {
                            initEvents();
                        },
                        initEvents = function () {
                            // add navigation events
                            $navArrows.children(':first').on('click', function () {
                                slicebox.next();
                                return false;
                            });

                            $navArrows.children(':last').on('click', function () {
                                slicebox.previous();
                                return false;
                            });
                        };
                    return {init: init};
                })();
                Page.init();
            });
        };

    </script>
</head>
<body>
    <div id="bubbleBackground"></div>
    <a id="play" class="btn-floating btn-large waves-effect waves-light green" style="position: fixed; right: 20px; bottom: 20px;">
        <i class="material-icons">play_arrow</i>
    </a>
    <div class="slider-container" style="display: none;">
        {% include 'slider.html' %}
    </div>
</body>
<script type="text/javascript">
    let isPlaying = false;
    let timer = null;
    $("#play").click(function () {
        if (isPlaying === false) {
            $("div.slider-container").show();
            M.toast({html: '自動再生しました。'});
            timer = setInterval(function () {
                $("#next").click();
            }, 2000);
            $("#play").removeClass('green');
            $("#play").addClass('red');
            $("#play").html('<i class="material-icons">pause</i>');
        } else {
            clearInterval(timer);
            $("#play").removeClass('red');
            $("#play").addClass('green');
            $("#play").html('<i class="material-icons">play_arrow</i>');
            M.toast({html: '一時停止しました。'});
            $("div.slider-container").hide();
        }
        isPlaying = !isPlaying;
    });
</script>
</html>